
-- https://stackoverflow.com/questions/54544632/how-to-prevent-duplicate-insert-with-insert-return-in-postgres


DROP TABLE IF EXISTS people;

CREATE TABLE IF NOT EXISTS people(
	name VARCHAR(30) NOT NULL,
	has_pet BOOLEAN DEFAULT false,
	pet_type VARCHAR(10) NOT NULL,
	pet_name VARCHAR(30),
	pet_age INT,
	
	UNIQUE (name, has_pet, pet_name, pet_age)
);

SELECT * FROM people;

INSERT INTO people (name, has_pet, pet_type, pet_name, pet_age)
VALUES ('Jacob', true, 'dog', 'Misty', 10),
  ('Ahmed', true, 'rock', 'Rockington', 100),
  ('Peter', true, 'cat', 'Franklin', 2),
  ('Dave', true, 'dog', 'Queso', 1)
  ON CONFLICT DO NOTHING
  ;
